---
description: 
globs: 
alwaysApply: true
---
# Build and Deployment Workflow Rule

Always perform the following steps on any code changes before pushing to the `main` branch:

- 1. **Clear Cache**: Remove the Next.js build cache by deleting the `.next` directory (e.g., `rm -rf .next`).
- 2. **Internal Build**: Run `npm run build` (or your build command) to ensure the application compiles without errors.  
- 3. **ESLint Tests**: Run `npm run lint` and resolve **all** errors and warnings.  
- 3a. **Biome Linter Tests**: Run `npx biome check app components lib hooks` (or `npm run biome:lint`) and resolve **all** warnings and errors. If it is just for making sure everything is pushed to Git and deployed to Vercel then ignore this. The Biome check is often a best practice note but not mandatory for deployment. I often would like you to do it though. 
- 4. **Internal Deployment**: Deploy to a staging environment (e.g., `npm run deploy`) or local environment to validate runtime behavior.  

After all checks pass with **zero errors** and no regressions or bugs:

- 5. **Git Push**: Commit any remaining changes and push to the `main` branch. The `main` branch is always live.  
- 6. **Auto-Deployment to Vercel**: Pushing to `main` triggers an automatic deployment workflow on Vercel.  
- 7. Run `npm run lint -- --fix` to auto-sort imports.

_Do not skip any step in this workflowâ€”ensuring a fully functional, bug-free codebase is mandatory before going live._  

 **ESLint `simple-import-sort` Rule (Date: 2025-04-28):**
    *   **Issue:** Repeated build failures occurred due to the `simple-import-sort/imports` and `simple-import-sort/exports` ESLint rules, even after attempting manual sorting.
    *   **Resolution:** Manually guessing the correct order for this rule can be unreliable. The most effective way to fix these errors is to run the project's lint command with the autofix flag (e.g., `npm run lint -- --fix` or `bun run lint --fix`). This ensures the specific sorting convention configured for the project is applied correctly.
    *   **Workflow:** Always run the lint autofixer before committing changes, especially after adding new files (like Shadcn components) or significantly modifying imports/exports.